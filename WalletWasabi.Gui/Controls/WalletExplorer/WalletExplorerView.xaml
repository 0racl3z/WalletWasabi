<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ViewModels="clr-namespace:WalletWasabi.Gui.Controls.WalletExplorer;assembly=WalletWasabi.Gui"
             xmlns:i="clr-namespace:Avalonia.Xaml.Interactivity;assembly=Avalonia.Xaml.Interactivity"
             xmlns:behaviors="clr-namespace:WalletWasabi.Gui.Behaviors;assembly=WalletWasabi.Gui"
             x:Class="WalletWasabi.Gui.Controls.WalletExplorer.WalletExplorerView">
  <UserControl.Styles>
    <Style Selector="DrawingPresenter#PART_Spinner">
      <Style.Animations>
        <Animation Duration="0:0:2.5" IterationCount="Infinite">
          <KeyFrame Cue="100%">
            <Setter Property="RotateTransform.Angle" Value="360" />
          </KeyFrame>
        </Animation>
      </Style.Animations>
    </Style>
  </UserControl.Styles>
  <DockPanel LastChildFill="True">
    <Panel DockPanel.Dock="Top" HorizontalAlignment="Stretch" Background="{DynamicResource ThemeControlLowBrush}">
      <StackPanel Orientation="Horizontal" Spacing="2" Margin="2">
        <Button Background="Transparent" BorderThickness="0" ToolTip.Tip="Collapse All" Command="{Binding CollapseAllCommand}">
          <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_CollapseTree}" />
        </Button>

        <Button Background="Transparent" BorderThickness="0" ToolTip.Tip="Lurking Wife Mode" Command="{Binding LurkingWifeModeCommand}">
          <DrawingPresenter Width="16" Height="16">
            <DrawingGroup>
              <GeometryDrawing Brush="#FFF0EFF1" Geometry="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"   />
            </DrawingGroup>
          </DrawingPresenter>
        </Button>
      </StackPanel>
    </Panel>
    <Panel>
      <TreeView BorderThickness="0" Items="{Binding Wallets}" SelectedItem="{Binding SelectedItem}">
        <TreeView.Styles>
          <Style Selector="TreeViewItem">
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
          </Style>
        </TreeView.Styles>
        <TreeView.DataTemplates>
          <TreeDataTemplate DataType="ViewModels:ClosedWalletViewModel" ItemsSource="{Binding Actions}">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <i:Interaction.Behaviors>
                <behaviors:CommandOnDoubleClickBehavior Command="{Binding OpenWalletCommand}" />
              </i:Interaction.Behaviors>
              <StackPanel.ContextMenu>
                <ContextMenu>
                  <MenuItem Header="Open Wallet" Command="{Binding OpenWalletCommand}" />
                </ContextMenu>
              </StackPanel.ContextMenu>
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorer_ClosedWallet}" />
              <TextBlock Text="{Binding Title}" Height="19" VerticalAlignment="Center" />
              <DrawingPresenter Name="PART_Spinner" Width="16" Height="16" IsVisible="{Binding IsBusy}" Drawing="{DynamicResource WalletExplorer_Spinner}" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:WalletViewModel" ItemsSource="{Binding Actions}">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorer_OpenWallet}" />
              <TextBlock Text="{Binding Title}" Height="19" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:SendTabViewModel">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_Send}" />
              <TextBlock Text="{Binding Title}" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:BuildTabViewModel">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_Builder}" />
              <TextBlock Text="{Binding Title}" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:ReceiveTabViewModel">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_Receive}" />
              <TextBlock Text="{Binding Title}" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:CoinJoinTabViewModel">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_CoinJoin}" />
              <TextBlock Text="{Binding Title}" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:HistoryTabViewModel">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_History}" />
              <TextBlock Text="{Binding Title}" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:WalletInfoViewModel">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_Info}" />
              <TextBlock Text="Wallet Info" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
          <TreeDataTemplate DataType="ViewModels:WalletAdvancedViewModel" ItemsSource="{Binding Items}">
            <StackPanel Orientation="Horizontal" Spacing="6">
              <DrawingPresenter Width="16" Height="16" Drawing="{DynamicResource WalletExplorerView_Advanced}" />
              <TextBlock Text="Advanced" VerticalAlignment="Center" />
            </StackPanel>
          </TreeDataTemplate>
        </TreeView.DataTemplates>
      </TreeView>
    </Panel>
  </DockPanel>
</UserControl>
